{% extends "yighub/base.html" %}

{% block style %}
.lead {
	background-color:gray;
	color:white;
}
{% endblock %}

{% block sidebar %}
	<div class="span3">
		<div class="sidebar-nav">
			<ul class="nav nav-list sidebar">
				<li class="nav-header">Boards</li>
				{% for b in bulletin_list %}
				<li>
					<a href="{% url 'yighub:listing' 'bulletin' b.id 1 %}">{{ b.name }}
						<i class="icon-chevron-right"></i>
					</a>
				</li>
				{% endfor %}
				<li class="nav-header">Taskforce</li>
				{% for t in taskforce_list %}
				<li>
					<a href="{% url 'yighub:listing' 'taskforce' t.id 1 %}">{{ t.name }}
						<i class="icon-chevron-right"></i>
					</a>
				</li>
				{% endfor %}
			</ul>
		</div><!--/.well -->
	</div><!--/span-->
{% endblock %}
{% block contents %}
	<div class="span9">
		<br />	
		<br />

		<div class="container-fluid" style="max-width: 680px; margin-left: auto; margin-right: auto;">
			<div class="row-fluid">
				<span class="lead">Boards News</span>
				<div class="container-fluid pull-right">
					<a href="{% url 'yighub:create' 'bulletin' %}">
						<button type="button" class="btn btn-primary">글쓰기</button>
					</a>
				</div> 
			</div>
			<br />
			{% if bulletin_news %}
			<table class="table">
				<thead>
					<tr class="info">
						<th> 글쓴이 </th>
						<th> 제목 </th>
						<th> 등록일 </th>
					</tr>
				</thead>
				<tbody>
					{% for entry in bulletin_news %}
					<tr>
						<td style="min-width: 50px;"> {{ entry.creator }} </td>
						<td style="min-width: 400px;">
							{% for i in entry.range %} ↳ {% endfor %}
							<a href="{% url 'yighub:read' 'bulletin' entry.id %}">{{ entry.title|truncatechars:38 }}
								<span class="badge badge-info">{{ entry.count_comment }}</span>
							</a>
						</td>
						<td style="min-width: 150px;"> {{ entry.time_created }} </td>
					</tr>
					{% endfor %}
				</tbody>
			</table>
			{% else %}
			<div class="container-fruid text-center">
				<p> 아직 글이 존재하지 않습니다. </p>
			</div>
			{% endif %}
			<br />

			<div class="row-fluid">
				<span class="lead">Taskforce News</span>
				<div class="container-fluid pull-right">
					<a href="{% url 'yighub:create' 'taskforce' %}">
						<button type="button" class="btn btn-primary">글쓰기</button>
					</a>
				</div> 
			</div>
			<br />
			{% if taskforce_news %}
			<table class="table">
				<thead>
					<tr class="info">
						<th> 글쓴이 </th>
						<th> 제목 </th>
						<th> 등록일 </th>
					</tr>
				</thead>
				<tbody>
					{% for entry in taskforce_news %}
					<tr>
						<td style="min-width: 50px;"> {{ entry.creator }} </td>
						<td style="min-width: 400px;">
							{% for i in entry.range %} ↳ {% endfor %}
							<a href="{% url 'yighub:read' 'taskforce' entry.id %}">{{ entry.title|truncatechars:38 }}
								<span class="badge badge-info">{{ entry.count_comment }}</span>
							</a>
						</td>
						<td style="min-width: 150px;"> {{ entry.time_created }} </td>
					</tr>
					{% endfor %}
				</tbody>
			</table>
			{% else %}
			<div class="container-fruid text-center">
				<p> 아직 글이 존재하지 않습니다. </p>
			</div>
			{% endif %}
			<br />

			<form class="form-inline" action="{% url 'yighub:create_memo' %}" method="post">
				{% csrf_token %}
				<span class="lead">Memo</span>
				<input class="span9" style="margin-left:15px;" type = 'text' name = 'memo' maxlength="50" placeholder="한줄씩 흔적 남기기"/>
				
				<button type="submit" class="btn pull-right">남기기</button>
			</form>

			<table class="table">
				{% if memos %}
				<tbody>
					{% for m in memos %}
					<tr>
						<td style="min-width: 50px;"> {{ m.creator }} </td>
						<td style="min-width: 400px;"> {{ m.memo }} </td>
						<td style="min-width: 150px;"> {{ m.time_created }} </td>
						{% if m.creator == user %}
						<td class="pull-right"> 
							<a href = "{% url 'yighub:delete_memo' m.id %}"> 
								<i class="icon-remove" style="opacity:0.25"></i> 
							</a>
						</td>
						{% endif %}
					</tr>
					{% endfor %}
				</tbody>
				{% else %}
				<tbody>
					<tr>
						<td>
							<p class="text-center"> 아직 글이 존재하지 않습니다. </p>
						</td>
					</tr>
				</tbody>
				{% endif %}
			</table>
			<a href="{% url 'yighub:memo' 1 %}" class="pull-right">메모 더보기</a>
		</div>

	</div><!--/span-->	

{% endblock %}
<!--
<h2>최신글 보기</h2>
{% if page.entry_list %}
<ul>
{% for entry in news %}
{% for i in entry.range %}
<ul>
{% endfor %}
<li><a href = '/yighub/entry/{{ entry.id }}/'>{{ entry.title }}</a></li> {# 여러 정보 표시할 것#}
{% for i in entry.range %}
</ul>
{% endfor %}

{% endfor %}
</ul>
{% else %}
<p> No entry is available. </p>
{% endif %}
<h2>최신글 더보기</h2>
<p><a href = '/yighub/board/0/page/1'>최신글 페이지</a></p>
<br />
<h2>한줄게시판</h2>
{% for m in memos.entry_list %}
<p>{{ m.creator }} : {{ m.memo }} - {{ m.time_created }}</p>
{% endfor %}
<br />
{% if memos.first_page %}
<br />
<a href = '/yighub/home/page/{{ memos.first_page }}/'>first_page</a>
<a href = '/yighub/home/page/{{ memos.prev_page }}/'>prev_page</a>
{% endif %}
{% for p in memos.page_list %}
<a href = '/yighub/home/page/{{ p }}/'>{{ p }}</a>
{% endfor %}
{% if page.last_page %}
<a href = '/yighub/home/page/{{ memos.next_page }}/'>next_page</a>
<a href = '/yighub/home/page/{{ memos.last_page }}/'>last_page</a>
{% endif %}
<h2>메모 쓰기</h2>
<form action = '/yighub/memo/create/' method = 'post'>
{% csrf_token %}
<input type = 'text' name = 'memo' />
<input type = 'submit' value = '메모 작성' />
</form>
<a href = '/yighub/entry/create/'>글쓰기</a>

<br />
<a href = '/yighub/logout/'>로그아웃</a>

